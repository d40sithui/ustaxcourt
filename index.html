<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="jquery.csv.js"></script>
<script>
$(document).ready(function(){

  var plans;
  var zips;
  var silverPlans = new Array();


  /* ***************************
  Convert PLANS.CSV to array
  **************************** */
	$.ajax({
	  type: "GET",  
	  url: "plans.csv",
	  dataType: "text",
    async: false,       
	  success: function(response)  
	  {
		data = $.csv.toArrays(response);
      plans = data;
	  }   

	});

  /* ***************************
  Convert ZIPS.CSV to array
  **************************** */
	$.ajax({
	  type: "GET",  
	  url: "zips.csv",
	  dataType: "text",
    async: false,       
	  success: function(response)  
	  {
		data = $.csv.toArrays(response);
      zips = data;
	  }   

	});

  /* ***************************
  Filter to only Silver plans
  ***************************** */
  var i;
  var j = 0;
  for (i = 0; i < plans.length; ++i) {
    if(plans[i][2]=="Silver"){
      silverPlans[j] = plans[i];
      j++;
    }
  }

  //plans.splice(0,1);

  
  /* ***************************
  create an array with unique zip
  **************************** */


  //print data to test
  text = "<table><tr><td>PLANS</td><td>ZIPS</td><td>silverPlans</td></tr><tr><td valign=top>"
  text += "<ul>";
    for (let i = 0; i < plans.length; i++) {
      text += "<li>" + plans[i] + "</li>";
      }
    text += "</ul>";

  text += "</td><td valign=top><ul>";
    for (let i = 0; i < zips.length; i++) {
      text += "<li>" + zips[i] + "</li>";
      }

  text += "</ul></td><td valign=top><ul>";
    for (i = 0; i < silverPlans.length; ++i) {
      text += "<li>" +silverPlans[i]+"</li>";
    }
    text += "</ul></td></tr></table>";


    $( "#plans_data" ).append(text);
  

    //prints entire list for PLANS
    console.log(plans[1]); 

    //prints specific key, value
    console.log(plans[1][0]); //plan_id
    console.log(plans[1][1]); //state
    console.log(plans[1][2]); //metal_level
    console.log(plans[1][3]); //rate
    console.log(plans[1][4]); //rate_area

    //prints entire list for ZIPs
    console.log(zips[1]);

    console.log(zips[1][0]); //zip_code
    console.log(zips[1][1]); //state
    console.log(zips[1][2]); //county_code
    console.log(zips[1][3]); //name
    console.log(zips[1][4]); //rate_area

    //console.log(plans);

});
</script>
</head>
<body>

<div id="plans_data">
  </div>

</body>
</html>
